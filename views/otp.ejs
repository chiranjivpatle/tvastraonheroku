<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css"
        integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
   
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/theme.css">
    <link rel="stylesheet" href="css/otp.css">

    <title>otp</title>
</head>
<body>

<!--NavBar-->
<%- include('include/_navbar') %>


<% if(data.err) { %>
  <div class="alert">
      <i class="fa fa-check-circle" aria-hidden="true"></i>
      <div class="alert_content">
          <h5>Info</h5>
          <p> <strong> <%= data.err %> </strong> </p>
      </div>
      <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span> 
  </div>
<% } %>
  
<% if(data.error) { %>
  <div class="alerttwo">
      <i class="fa fa-check-circle" aria-hidden="true"></i>
      <div class="alert_content">
          <h5>Failure</h5>
          <p> <strong> <%= data.error %> </strong> </p>
      </div>
      <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span> 
  </div>
<% } %>


<div class="main">

    <div class="login-box">

        <div class="login">
            <h2>OTP</h2>
        </div>

        <div class="form">
            <p> we have sent one time password (OTP) to your registered Phone Number</p>
            <form action="/otp_send" method="post">
              <div class="codebox">
                <input id="codeBox1" type="number" name="input1" maxlength="1" onkeyup="onKeyUpEvent(1, event)" onfocus="onFocusEvent(1)"/>
                <input id="codeBox2" type="number" name="input2" maxlength="1" onkeyup="onKeyUpEvent(2, event)" onfocus="onFocusEvent(2)"/>
                <input id="codeBox3" type="number" name="input3" maxlength="1" onkeyup="onKeyUpEvent(3, event)" onfocus="onFocusEvent(3)"/>
                <input id="codeBox4" type="number" name="input4" maxlength="1" onkeyup="onKeyUpEvent(4, event)" onfocus="onFocusEvent(4)"/>           
              </div>
              <a href=""><h5> resend in<span id="count"></span></h5></a>  
              <button> SUBMIT <span> <i class="fa fa-arrow-right" aria-hidden="true"></i> </span></button>
            </form>
        </div>
 
    </div>

    <div class="reserved">
        <h6> All right reserved Tvastra 2020 </h6>
    </div>

</div>


    <script>
      function getCodeBoxElement(index) {
        return document.getElementById('codeBox' + index);
      }
      function onKeyUpEvent(index, event) {
        const eventCode = event.which || event.keyCode;
        if (getCodeBoxElement(index).value.length === 1) {
          if (index !== 4) {
            getCodeBoxElement(index+ 1).focus();
          } else {
            getCodeBoxElement(index).blur();
            // Submit code
            console.log('submit code ');
          }
        }
        if (eventCode === 8 && index !== 1) {
          getCodeBoxElement(index - 1).focus();
        }
      }
      function onFocusEvent(index) {
        for (item = 1; item < index; item++) {
          const currentElement = getCodeBoxElement(item);
          if (!currentElement.value) {
              currentElement.focus();
              break;
          }
        }
      }





     
    </script>
    <script type="text/javascript">
          var timeLeft = 30;
var elem = document.getElementById('count');
var timerId = setInterval(countdown, 1000);

function countdown() {
    if (timeLeft == -1) {
        clearTimeout(timerId);
        doSomething();
    } else {
        elem.innerHTML = timeLeft;
        timeLeft--;
    }
}


    </script>

    
    
</body>
</html>